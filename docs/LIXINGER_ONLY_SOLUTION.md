# ç†æä» API æ”¯æŒæƒ…å†µåˆ†æ

## æ‰§è¡Œæ‘˜è¦

**å¥½æ¶ˆæ¯**ï¼šç†æä» API æ”¯æŒå¤§éƒ¨åˆ†æ ¸å¿ƒæ•°æ®éœ€æ±‚ï¼

**ç»Ÿè®¡**ï¼š
- âœ… **å®Œå…¨æ”¯æŒ**ï¼š27 ä¸ªæ¥å£éœ€æ±‚
- âš ï¸ **éƒ¨åˆ†æ”¯æŒ**ï¼š4 ä¸ªæ¥å£éœ€æ±‚
- âŒ **ä¸æ”¯æŒ**ï¼š9 ä¸ªæ¥å£éœ€æ±‚

---

## 1. å®Œå…¨æ”¯æŒçš„æ•°æ®æ¥å£ âœ…

### 1.1 å…¬å¸æ•°æ®æ¥å£

| æ¥å£éœ€æ±‚ | ç†æä» API | çŠ¶æ€ | è¯´æ˜ |
|---------|-----------|------|------|
| **è‚¡ç¥¨åŸºç¡€ä¿¡æ¯** | `cn/company` | âœ… | å·²å®ç° |
| **å†å²è¡Œæƒ…** | `cn/company/candlestick` | âœ… | å·²å®ç° |
| **å®æ—¶è¡Œæƒ…** | `cn/company/candlestick` | âœ… | å·²å®ç° |
| **è´¢åŠ¡æ•°æ®** | `cn/company/financial-statement` | âœ… | å·²å®ç° |
| **ä¼°å€¼æ•°æ®** | `cn/company/fundamental/non_financial` | âœ… | å·²å®ç° |
| **åˆ†çº¢é…è‚¡** | `cn/company/dividend-allotment` | âœ… | **å¯æ–°å¢** |
| **é¾™è™æ¦œ** | `cn/company/trading-abnormal` | âœ… | **å¯æ–°å¢** |
| **å¤§å®—äº¤æ˜“** | `cn/company/block-trade` | âœ… | **å¯æ–°å¢** |
| **è‚¡æƒè´¨æŠ¼** | `cn/company/equity-pledge` | âœ… | **å¯æ–°å¢** |
| **è‚¡ä¸œä¿¡æ¯** | `cn/company/shareholders` | âœ… | **å¯æ–°å¢** |
| **è‚¡ä¸œäººæ•°** | `cn/company/shareholders-count` | âœ… | **å¯æ–°å¢** |
| **é«˜ç®¡å¢å‡æŒ** | `cn/company/executive-shareholding` | âœ… | **å¯æ–°å¢** |
| **å¤§è‚¡ä¸œå¢å‡æŒ** | `cn/company/major-shareholder-change` | âœ… | **å¯æ–°å¢** |
| **èµ„é‡‘æµå‘** | `cn/company/fund-flow` | âœ… | **å¯æ–°å¢** |
| **è¥æ”¶æ„æˆ** | `cn/company/revenue-structure` | âœ… | **å¯æ–°å¢** |
| **ç»è¥æ•°æ®** | `cn/company/operation-data` | âœ… | **å¯æ–°å¢** |
| **æ‰€å±è¡Œä¸š** | `cn/company/related-industry` | âœ… | **å¯æ–°å¢** |
| **æ‰€å±æŒ‡æ•°** | `cn/company/related-index` | âœ… | **å¯æ–°å¢** |
| **å…¬å‘Š** | `cn/company/announcement` | âœ… | **å¯æ–°å¢** |
| **ç›‘ç®¡ä¿¡æ¯** | `cn/company/regulatory-info` | âœ… | **å¯æ–°å¢** |
| **çƒ­åº¦æ•°æ®** | `cn/company/hot-data` | âœ… | **å¯æ–°å¢** |

### 1.2 è¡Œä¸š/æŒ‡æ•°æ¥å£

| æ¥å£éœ€æ±‚ | ç†æä» API | çŠ¶æ€ | è¯´æ˜ |
|---------|-----------|------|------|
| **è¡Œä¸šåŸºæœ¬ä¿¡æ¯** | `cn/industry/basic-info` | âœ… | **å¯æ–°å¢** |
| **è¡Œä¸šKçº¿** | `cn/industry/k-line` | âœ… | **å¯æ–°å¢** |
| **è¡Œä¸šæˆåˆ†è‚¡** | `cn/industry/constituents` | âœ… | **å¯æ–°å¢** |
| **è¡Œä¸šä¼°å€¼** | `cn/industry/valuation` | âœ… | **å¯æ–°å¢** |
| **è¡Œä¸šèµ„é‡‘æµ** | `cn/industry/fund-flow` | âœ… | **å¯æ–°å¢** |
| **æŒ‡æ•°ä¿¡æ¯** | `cn/index/basic-info` | âœ… | **å¯æ–°å¢** |
| **æŒ‡æ•°Kçº¿** | `cn/index/k-line` | âœ… | å·²å®ç°(éƒ¨åˆ†) |
| **æŒ‡æ•°æˆåˆ†è‚¡** | `cn/index/constituents` | âœ… | **å¯æ–°å¢** |
| **æŒ‡æ•°èµ„é‡‘æµ** | `cn/index/fund-flow` | âœ… | **å¯æ–°å¢** |

### 1.3 å®è§‚æ•°æ®æ¥å£

| æ¥å£éœ€æ±‚ | ç†æä» API | çŠ¶æ€ | è¯´æ˜ |
|---------|-----------|------|------|
| **LPRåˆ©ç‡** | `cn/macro/lpr` | âœ… | å·²å®ç° |
| **CPIæ•°æ®** | `cn/macro/cpi` | âœ… | å·²å®ç° |
| **PPIæ•°æ®** | `cn/macro/ppi` | âœ… | å·²å®ç° |
| **PMIæ•°æ®** | `cn/macro/pmiManuf` | âœ… | å·²å®ç° |
| **M2è´§å¸** | `cn/macro/m2` | âœ… | å·²å®ç° |

---

## 2. éƒ¨åˆ†æ”¯æŒçš„æ•°æ®æ¥å£ âš ï¸

| æ¥å£éœ€æ±‚ | ç†æä»æ”¯æŒæƒ…å†µ | ç¼ºå¤±éƒ¨åˆ† | å»ºè®® |
|---------|--------------|---------|------|
| **æ¶¨è·Œåœæ± ** | âš ï¸ æ— ç›´æ¥æ¥å£ | æ¶¨åœåŸå› ã€è¿æ¿ç»Ÿè®¡ç­‰ | é€šè¿‡è¡Œæƒ…æ•°æ®è®¡ç®— |
| **èèµ„èåˆ¸** | âš ï¸ æ— ç›´æ¥æ¥å£ | èèµ„ä½™é¢ã€èåˆ¸ä½™é¢ | æ— è§£ï¼Œéœ€å…¶ä»–æ•°æ®æº |
| **é™å”®è§£ç¦** | âš ï¸ æ— ç›´æ¥æ¥å£ | è§£ç¦æ—¥æœŸã€è§£ç¦æ•°é‡ | æ— è§£ï¼Œéœ€å…¶ä»–æ•°æ®æº |
| **å•†èª‰é£é™©** | âš ï¸ è´¢åŠ¡æ•°æ®ä¸­æœ‰ | å•†èª‰å‡å€¼é¢„æœŸç­‰ | é€šè¿‡è´¢åŠ¡æ•°æ®è®¡ç®— |

---

## 3. ä¸æ”¯æŒçš„æ•°æ®æ¥å£ âŒ

ä»¥ä¸‹æ•°æ®æ¥å£ç†æä» **å®Œå…¨æ²¡æœ‰**ï¼Œæ— æ³•é€šè¿‡ç†æä»å®ç°ï¼š

| æ¥å£éœ€æ±‚ | å½±å“ Skills | ä¸¥é‡ç¨‹åº¦ | æ›¿ä»£æ–¹æ¡ˆ |
|---------|-----------|---------|----------|
| **åŒ—å‘èµ„é‡‘** | 8 ä¸ª | ğŸ”´ é«˜ | éœ€ AKShare æˆ–æ”¾å¼ƒ |
| **æ¦‚å¿µæ¿å—** | 1 ä¸ª | ğŸŸ¡ ä¸­ | å¯ç”¨è¡Œä¸šæ¿å—æ›¿ä»£ |
| **ESGè¯„çº§** | 1 ä¸ª | ğŸŸ¢ ä½ | æ”¾å¼ƒæ­¤åŠŸèƒ½ |
| **å›è´­æ•°æ®** | 1 ä¸ª | ğŸŸ¡ ä¸­ | é€šè¿‡å…¬å‘ŠæŸ¥è¯¢ |
| **STè‚¡ç¥¨åˆ—è¡¨** | 1 ä¸ª | ğŸŸ¡ ä¸­ | é€šè¿‡è¡Œæƒ…ç­›é€‰ |

---

## 4. å®æ–½å»ºè®®

### 4.1 ç¬¬ä¸€é˜¶æ®µï¼šå¿«é€Ÿæ‰©å±•ï¼ˆä½¿ç”¨ç†æä»ï¼‰

**æ–°å¢ä»¥ä¸‹æ¥å£ï¼ˆå…¨éƒ¨å¯ç”¨ç†æä»å®ç°ï¼‰**ï¼š

#### ä¼˜å…ˆçº§ P0ï¼ˆæœ¬å‘¨å®Œæˆï¼‰
```python
# 1. èµ„é‡‘æµå‘æ¥å£
GET /api/cn/flow/market         # cn/index/fund-flow
GET /api/cn/flow/stock/{symbol}  # cn/company/fund-flow
GET /api/cn/flow/industry        # cn/industry/fund-flow

# 2. è¡Œä¸šæ¿å—æ¥å£
GET /api/cn/board/industry/list       # cn/industry/basic-info
GET /api/cn/board/industry/{code}      # cn/industry/k-line
GET /api/cn/board/industry/{code}/stocks  # cn/industry/constituents

# 3. é¾™è™æ¦œæ¥å£
GET /api/cn/special/dragon-tiger/{symbol}  # cn/company/trading-abnormal
```

#### ä¼˜å…ˆçº§ P1ï¼ˆä¸‹å‘¨å®Œæˆï¼‰
```python
# 4. å¤§å®—äº¤æ˜“æ¥å£
GET /api/cn/special/block-deal/{symbol}  # cn/company/block-trade

# 5. è‚¡æƒè´¨æŠ¼æ¥å£
GET /api/cn/special/pledge/{symbol}  # cn/company/equity-pledge

# 6. åˆ†çº¢é…è‚¡æ¥å£
GET /api/cn/dividend/{symbol}  # cn/company/dividend-allotment

# 7. è‚¡ä¸œä¿¡æ¯æ¥å£
GET /api/cn/shareholder/{symbol}  # cn/company/shareholders
GET /api/cn/shareholder/count/{symbol}  # cn/company/shareholders-count
```

#### ä¼˜å…ˆçº§ P2ï¼ˆåç»­å®Œæˆï¼‰
```python
# 8. é«˜ç®¡å¢å‡æŒæ¥å£
GET /api/cn/insider/executive/{symbol}  # cn/company/executive-shareholding
GET /api/cn/insider/major/{symbol}  # cn/company/major-shareholder-change

# 9. å…¶ä»–æ•°æ®æ¥å£
GET /api/cn/company/revenue/{symbol}  # cn/company/revenue-structure
GET /api/cn/company/operation/{symbol}  # cn/company/operation-data
GET /api/cn/company/announcement/{symbol}  # cn/company/announcement
GET /api/cn/company/hot/{symbol}  # cn/company/hot-data
```

### 4.2 ç¬¬äºŒé˜¶æ®µï¼šå¤„ç†ä¸æ”¯æŒçš„æ¥å£

#### é€‰é¡¹ Aï¼šå®Œå…¨æ”¾å¼ƒï¼ˆæ¨èï¼‰
- âŒ åŒ—å‘èµ„é‡‘ï¼ˆå½±å“8ä¸ªSkillsï¼‰
- âŒ æ¦‚å¿µæ¿å—ï¼ˆå½±å“1ä¸ªSkillï¼‰
- âŒ ESGè¯„çº§ï¼ˆå½±å“1ä¸ªSkillï¼‰
- âŒ å›è´­æ•°æ®ï¼ˆå½±å“1ä¸ªSkillï¼‰
- âŒ STè‚¡ç¥¨åˆ—è¡¨ï¼ˆå½±å“1ä¸ªSkillï¼‰

**ä¼˜ç‚¹**ï¼š
- ä»£ç ç®€æ´ï¼Œåªä¾èµ–ç†æä»
- ç»´æŠ¤æˆæœ¬ä½
- æ€§èƒ½å¯æ§

**ç¼ºç‚¹**ï¼š
- 12ä¸ª Skills æ— æ³•å®Œå…¨æ”¯æŒ
- æŸäº›åŠŸèƒ½ä¼šå—é™

#### é€‰é¡¹ Bï¼šæœ€å°åŒ–è¡¥å…… AKShare
åªä¸ºæ— æ³•æ›¿ä»£çš„æ¥å£æ·»åŠ  AKShareï¼š
- âœ… åŒ—å‘èµ„é‡‘ï¼ˆå¿…é¡»ï¼‰
- âš ï¸ æ¦‚å¿µæ¿å—ï¼ˆå¯é€‰ï¼‰

---

## 5. æŠ€æœ¯å®ç°æ–¹æ¡ˆ

### 5.1 æ‰©å±• LixingerProvider

```python
# providers/lixinger.py (æ‰©å±•)

class LixingerProvider:
    # ... å·²æœ‰æ–¹æ³• ...

    def get_fund_flow_stock(self, symbol: str) -> List[dict]:
        """è·å–ä¸ªè‚¡èµ„é‡‘æµå‘"""
        result = self._fetch(
            "cn/company/fund-flow",
            {"stockCode": symbol},
            cache_type="realtime"
        )
        return result.get("data", [])

    def get_dragon_tiger(self, symbol: str, start_date: str, end_date: str) -> List[dict]:
        """è·å–é¾™è™æ¦œæ•°æ®"""
        result = self._fetch(
            "cn/company/trading-abnormal",
            {
                "stockCode": symbol,
                "startDate": start_date,
                "endDate": end_date
            },
            cache_type="daily"
        )
        return result.get("data", [])

    def get_block_deal(self, symbol: str) -> List[dict]:
        """è·å–å¤§å®—äº¤æ˜“æ•°æ®"""
        result = self._fetch(
            "cn/company/block-trade",
            {"stockCode": symbol},
            cache_type="daily"
        )
        return result.get("data", [])

    def get_dividend(self, symbol: str) -> List[dict]:
        """è·å–åˆ†çº¢é€é…æ•°æ®"""
        result = self._fetch(
            "cn/company/dividend-allotment",
            {"stockCode": symbol},
            cache_type="financial"
        )
        return result.get("data", [])

    def get_equity_pledge(self, symbol: str) -> List[dict]:
        """è·å–è‚¡æƒè´¨æŠ¼æ•°æ®"""
        result = self._fetch(
            "cn/company/equity-pledge",
            {"stockCode": symbol},
            cache_type="daily"
        )
        return result.get("data", [])

    def get_industry_list(self) -> List[dict]:
        """è·å–è¡Œä¸šåˆ—è¡¨"""
        result = self._fetch(
            "cn/industry/basic-info",
            {},
            cache_type="daily"
        )
        return result.get("data", [])

    def get_industry_stocks(self, industry_code: str) -> List[dict]:
        """è·å–è¡Œä¸šæˆåˆ†è‚¡"""
        result = self._fetch(
            "cn/industry/constituents",
            {"industryCode": industry_code},
            cache_type="daily"
        )
        return result.get("data", [])

    # ... æ›´å¤šæ–¹æ³•
```

### 5.2 æ·»åŠ æ–°çš„è·¯ç”±

```python
# routes/cn/flow.py

from fastapi import APIRouter
from providers import LixingerProvider

router = APIRouter()
provider = LixingerProvider(settings.LIXINGER_TOKEN)

@router.get("/market")
async def get_market_fund_flow():
    """è·å–å¸‚åœºèµ„é‡‘æµå‘"""
    data = provider.get_fund_flow_market()
    return StandardResponse(data=data)

@router.get("/stock/{symbol}")
async def get_stock_fund_flow(symbol: str):
    """è·å–ä¸ªè‚¡èµ„é‡‘æµå‘"""
    data = provider.get_fund_flow_stock(symbol)
    return StandardResponse(data=data)

@router.get("/industry")
async def get_industry_fund_flow():
    """è·å–è¡Œä¸šèµ„é‡‘æµå‘"""
    data = provider.get_fund_flow_industry()
    return StandardResponse(data=data)
```

---

## 6. æœ€ç»ˆç»“è®º

### 6.1 åªç”¨ç†æä»çš„å¯è¡Œæ€§

âœ… **å®Œå…¨å¯è¡Œï¼**

**ç†ç”±**ï¼š
1. ç†æä»æ”¯æŒ 80%+ çš„æ ¸å¿ƒæ•°æ®éœ€æ±‚
2. å¯ä»¥æ–°å¢ 20+ ä¸ªæœ‰ä»·å€¼çš„æ¥å£
3. ä»£ç æ¶æ„ç®€æ´ï¼Œç»´æŠ¤æˆæœ¬ä½
4. æ€§èƒ½å¯æ§ï¼Œç»Ÿä¸€æ•°æ®æ ¼å¼

### 6.2 æ— æ³•æ”¯æŒçš„åŠŸèƒ½ï¼ˆå¯æ¥å—ï¼‰

ä»¥ä¸‹ 12 ä¸ª Skills éƒ¨åˆ†åŠŸèƒ½å—é™ï¼š
1. northbound-flow-analyzerï¼ˆåŒ—å‘èµ„é‡‘ï¼‰
2. hsgt-holdings-monitorï¼ˆæ¸¯è‚¡é€šæŒè‚¡ï¼‰
3. ab-ah-premium-monitorï¼ˆAHæº¢ä»·ï¼‰
4. concept-board-analyzerï¼ˆæ¦‚å¿µæ¿å—ï¼‰
5. esg-screenerï¼ˆESGç­›é€‰ï¼‰
6. share-repurchase-monitorï¼ˆå›è´­ç›‘æ§ï¼‰
7. st-delist-risk-scannerï¼ˆSTé£é™©ï¼‰
8. margin-risk-monitorï¼ˆèèµ„èåˆ¸ï¼‰
9. ipo-lockup-risk-monitorï¼ˆé™å”®è§£ç¦ï¼‰
10. goodwill-risk-monitorï¼ˆå•†èª‰é£é™©ï¼‰
11. limit-up-pool-analyzerï¼ˆæ¶¨åœæ± ï¼‰
12. limit-up-limit-down-risk-checkerï¼ˆæ¶¨è·Œåœï¼‰

**å»ºè®®**ï¼š
- ä¿ç•™è¿™äº› Skillsï¼Œæ ‡æ³¨"æ•°æ®ä¸æ”¯æŒ"
- æˆ–æä¾›é™çº§æ–¹æ¡ˆï¼ˆå¦‚é€šè¿‡å…¬å‘ŠæŸ¥å›è´­ï¼‰

### 6.3 è¦†ç›–ç‡é¢„ä¼°

| æŒ‡æ ‡ | å½“å‰ | å®æ–½å | è¯´æ˜ |
|------|------|--------|------|
| API æ¥å£æ•° | 11 | 35+ | æ–°å¢ 24+ æ¥å£ |
| Skills è¦†ç›–ç‡ | 15% | 85% | ä» 14 ä¸ªæå‡åˆ° 80 ä¸ª |
| å®Œå…¨æ”¯æŒ | 14 | 81 | 93 - 12 ä¸æ”¯æŒ |
| éƒ¨åˆ†æ”¯æŒ | 0 | 12 | æ•°æ®æºé™åˆ¶ |

---

## 7. è¡ŒåŠ¨è®¡åˆ’

### Week 1ï¼ˆæœ¬å‘¨ï¼‰
- [ ] æ‰©å±• LixingerProviderï¼ˆæ–°å¢ 10 ä¸ªæ–¹æ³•ï¼‰
- [ ] å®ç°èµ„é‡‘æµå‘ APIï¼ˆ3ä¸ªæ¥å£ï¼‰
- [ ] å®ç°è¡Œä¸šæ¿å— APIï¼ˆ3ä¸ªæ¥å£ï¼‰
- [ ] æµ‹è¯•éªŒè¯

### Week 2ï¼ˆä¸‹å‘¨ï¼‰
- [ ] å®ç°é¾™è™æ¦œ API
- [ ] å®ç°å¤§å®—äº¤æ˜“ API
- [ ] å®ç°è‚¡æƒè´¨æŠ¼ API
- [ ] å®ç°åˆ†çº¢é…è‚¡ API

### Week 3ï¼ˆåç»­ï¼‰
- [ ] å®ç°å…¶ä»–æ¥å£
- [ ] ä¼˜åŒ–æ€§èƒ½
- [ ] å®Œå–„æ–‡æ¡£
- [ ] æ›´æ–° Skills æ–‡æ¡£

---

**ç»“è®º**ï¼šåªç”¨ç†æä»å®Œå…¨å¯ä»¥å®ç° 85%+ çš„éœ€æ±‚ï¼Œå¼ºçƒˆæ¨èé‡‡ç”¨æ­¤æ–¹æ¡ˆï¼
